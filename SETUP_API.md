# üîë Setting Up Your Gemini API Key

## Quick Setup (3 Steps)

### 1. Get Your API Key
1. Go to [Google AI Studio](https://aistudio.google.com/app/apikey)
2. Click "Create API Key"
3. Copy the key

### 2. Add to Environment File
Open `.env.local` in the project root and replace `your_api_key_here` with your actual key:

```
GEMINI_API_KEY=AIzaSy...your_actual_key_here
```

### 3. Restart the Dev Server
```bash
# Stop the current server (Ctrl+C)
# Then restart:
npm run dev
```

---

## Testing the Integration

### Test with Demo Mode
1. Go to http://localhost:3000
2. Click "Or Try Demo Report ‚Üí"
3. This uses mock data (no API key needed)

### Test with Real PDF
1. Upload a blood test report PDF
2. The app will:
   - Send the file to Gemini 1.5 Flash
   - Extract biomarkers automatically
   - Generate health insights
   - Display results in a printable report

---

## How It Works

```
User uploads PDF ‚Üí Frontend sends to /api/analyze 
‚Üí Backend sends to Gemini API ‚Üí AI extracts biomarkers 
‚Üí Returns JSON ‚Üí Frontend displays Smart Report
```

### API Flow

**Frontend** (`app/page.tsx`):
- Captures file upload
- Sends FormData to `/api/analyze`
- Receives JSON response
- Displays results

**Backend** (`app/api/analyze/route.ts`):
- Receives file as FormData
- Converts to base64
- Sends to Gemini 1.5 Flash with prompt
- Parses JSON response
- Returns structured biomarker data

---

## What Gemini Analyzes

The AI looks for:
- **Biomarker names** (Hemoglobin, Vitamin D, Cholesterol, etc.)
- **Values and units** (14.2 g/dL, 25 ng/mL)
- **Reference ranges** (13-17, 30-100)
- **Status determination** (normal, low, high)
- **Health insights** (one-sentence explanations)

---

## Troubleshooting

### "Gemini API key not configured"
- Make sure `.env.local` exists in the project root
- Check that `GEMINI_API_KEY` is set correctly
- Restart the dev server after adding the key

### "No biomarkers found"
- Ensure the PDF contains actual blood test results
- Try a different file format (JPG/PNG also supported)
- Check that text is readable (not scanned images)

### "Failed to process the file"
- Check your internet connection
- Verify the API key is valid
- Check the console for detailed errors

---

## Cost Estimation

**Gemini 1.5 Flash Pricing:**
- Input: ~$0.00001875 per 1K characters
- Output: ~$0.000075 per 1K characters

**Average Cost per Blood Report:**
- ~$0.001 - $0.005 per analysis
- Extremely affordable for prototypes!

---

## Security Notes

‚úÖ **What's Secure:**
- API key stored in `.env.local` (gitignored)
- No data persisted on server
- Files processed in memory only

‚ö†Ô∏è **What's NOT Secure (for production):**
- No authentication
- No rate limiting
- No file validation beyond type checking

For production, add:
- User authentication
- Rate limiting
- File size/type validation
- Virus scanning
- HIPAA-compliant storage (if needed)

---

## Next Steps

1. **Add your API key** to `.env.local`
2. **Upload a real blood test PDF** to test
3. **Review the Smart Report** generated by AI
4. **Download/print** the report

Happy analyzing! ü©∏
